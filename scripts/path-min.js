Vue.config.devtools=!1,Vue.config.debug=!1,Vue.config.silent=!0,Vue.config.ignoredElements=["app","page","navbar","settings","splash","splashwrap","message","notifications","speedControls","state","bank","commodity","detail","gameover","listheader","listings","category","name","units","currentPrice","description","market","currentValue","contractSize","goldbacking","contractUnit"];var app=new Vue({el:"#app",data:{gameOver:!1,maxBoardSize:460,pieceStates:["off","vertical","horizontal"],loadingSolution:!1,pieces:[],timer:0,showHome:!0,showInstructions:!0,showHowTo:!1,numberOfClears:0,nope:!1,numberOfSullied:0,currentMisses:0,divider:21,showGrid:!1,showPath:!0,savedState:[],statePurgatory:[],totalMoves:0,r:document.querySelector(":root")},methods:{NewGame(e=!1){this.NewBoard(e),this.gameOver=!1},CheckBoard(){this.numberOfSullied=0,this.pieces.forEach((e=>{e.sullied&&this.numberOfSullied++})),this.nope=!1,this.CheckPath()},CheckPath(){if(this.pieces.length==this.divider*this.divider)for(let e=0;e<this.pieces.length;e++){const t=this.pieces[e];e<this.divider?t.t="vertical"!=t.state:t.t="vertical"!=t.state&&"vertical"!=this.pieces[e-this.divider].state,e>=this.pieces.length-this.divider&&(t.b="vertical"!=t.state),e%this.divider==0?t.l="horizontal"!=t.state:t.l="horizontal"!=t.state&&"horizontal"!=this.pieces[e-1].state,e%this.divider==this.divider-1&&(t.r="horizontal"!=t.state)}this.RemoveDeadEndPaths()},RemoveDeadEndPaths(){let e=new PieceObject({}),t=new PieceObject({}),i=new PieceObject({}),s=new PieceObject({}),h=new PieceObject({}),r=new PieceObject({}),d=new PieceObject({}),a=new PieceObject({}),l=-1;for(;0!=l;){0;let o=0;for(let n=1;n<this.pieces.length-1;n++){const v=this.pieces[n];n-this.divider-1>=0&&(n-this.divider-1)%this.divider!=this.divider-1&&(e=this.pieces[n-this.divider-1]),n-this.divider>=0&&(t=this.pieces[n-this.divider]),n-this.divider+1>=0&&(n-this.divider+1)%this.divider!=this.divider&&(i=this.pieces[n-this.divider+1]),s=this.pieces[n-1],h=this.pieces[n+1],n+this.divider-1<this.pieces.length-1&&(n+this.divider-1)%this.divider!=this.divider-1&&(r=this.pieces[n+this.divider-1]),n+this.divider<this.pieces.length&&(d=this.pieces[n+this.divider]),n+this.divider+1<this.pieces.length&&(n+this.divider+1)%this.divider!=this.divider&&(a=this.pieces[n+this.divider+1]),n<this.divider&&v.t&&(n!=this.divider-1&&!s.t&&!v.l||n==this.divider-1&&!s.t&&!v.r||n!=this.divider-1&&!h.t&&!h.l)?(v.t=!1,o++):(!v.t||n%this.divider!=this.divider-1||t.r||v.r||h.t)&&(!(v.t&&n>=this.divider)||(s.t||v.l||t.l)&&(n%this.divider==this.divider-1||h.t||h.l||i.l))||(v.t=!1,o++),!v.b||n==this.pieces.length-1||(v.l||s.b)&&(h.l||h.b)||(v.b=!1,o++),!v.l||n%this.divider!=0||n==this.pieces.length-1||(v.t||t.l)&&(d.t||d.l)?v.l&&n%this.divider!=0&&(!s.t&&!v.t&&!t.l||n<this.pieces.length-this.divider&&!r.t&&!d.t&&!d.l||n>=this.pieces.length-this.divider&&!s.b&&!h.b)&&(v.l=!1,o++):(v.l=!1,o++),!v.r||n==this.pieces.length-1||(n==this.divider-1||v.t||t.r)&&(n!=this.divider-1||v.t||d.r)&&(d.t||d.r)||(v.r=!1,o++),(v.l&&v.t&&h.l&&d.t||v.l&&v.t&&v.r&&d.t||v.l&&v.t&&h.l&&v.b)&&(v.l=!1,o++),l=o}}},SaveBoard(e=!1){var t="";this.pieces.forEach((e=>{state="off"==e.state?"o":"vertical"==e.state?"l":"-",e.sullied&&(state="l"==state?"v":"h"),t+=state})),this.savedState=btoa(t)},NewBoard(e=!1){idCount=0,this.totalMoves=0;var t=(document.body.clientWidth-40)/this.divider;this.r.style.setProperty("--pieceSize",t+"px"),this.r.style.setProperty("--gridSize",this.divider),this.pieces=[],this.currentMisses=0;for(let t=0;t<this.divider*this.divider;t++){let i="",s=null,h=!1;e&&null!=this.savedState&&null!=this.savedState[t]&&(i=this.savedState[t].substring(0,1),"h"!=this.savedState[t]&&"v"!=this.savedState[t]||(this.totalMoves++,this.loadingSolution?(h=!0,s="v"==i?"horizontal":"vertical",i="v"==i?"l":"-"):(i="v"==i?"-":"l",s="l"==i?"vertical":"horizontal")));let r=new PieceObject({state:e?"o"==i?"off":"l"==i?"vertical":"horizontal":this.pieceStates[getRandomInt(0,this.pieceStates.length)],sullied:h});r.originalState=null==s?r.state:s,this.pieces.push(r)}this.CheckBoard()},ResetBoard(){this.pieces.forEach((e=>{e.state=e.originalState,e.sullied=!1})),this.CheckBoard()},TogglePieceSelection(e){"off"!=e.state&&(e.state="vertical"==e.state?"horizontal":"vertical",e.sullied=e.originalState!=e.state),this.CheckBoard()},SharePuzzle(){this.SaveBoard(),navigator.share({title:"Path",text:"Here's a puzzle I'm working on.",url:"https://"+location.host+location.pathname+"?board="+this.divider+"&walls="+this.savedState.toString()})},ShareSolution(){this.SaveBoard(),navigator.share({title:"Path",text:"Here's a puzzle I've solved.",url:"https://"+location.host+location.pathname+"?solution="+this.divider+"&walls="+this.savedState.toString()})},RestartGame(){this.timer=0,this.numberOfFails=0,this.numberOfClears=0,this.showHome=!1,this.NewGame()},SelectMode(e){},UpdateApp(){this.gameOver},MsToTime(e){var t=(e=(e-e%1e3)/1e3)%60,i=(e=(e-t)/60)%60,s=(e-i)/60;return(0!=s?s+"∶":"")+(0!=i?i+"∶":"")+(0!=i||0!=s?("0"+t).slice(-2):t)},EndGame(){window.confirm("Are you sure you want to quit?")&&(this.gameOver=!0)},GetSettings(){const e=new URLSearchParams(window.location.search);this.loadingSolution=!1,e.has("board")&&(this.divider=Number(e.get("board"))),e.has("solution")&&(this.divider=Number(e.get("solution")),this.loadingSolution=!0),e.has("walls")&&(this.savedState=atob(e.get("walls")).split(""))},Resize(){var e=(document.body.clientWidth-40)/this.divider;this.r.style.setProperty("--pieceSize",e+"px"),this.r.style.setProperty("--gridSize",this.divider)}},mounted(){this.GetSettings(),null!=this.savedState?this.NewGame(this.savedState.length==this.divider*this.divider):this.NewGame(),window.addEventListener("resize",this.Resize),this.updateInterval=window.setInterval(this.UpdateApp,100)},computed:{}});